<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>FITI ‚Äì Inspecci√≥n AT</title>

    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="container">

    <!-- ================= HOJA 1 ================= -->
    <div id="hoja1" class="page">
        <h1 class="main-title">Registro de Inspecci√≥n</h1>
        <p class="step-subtitle">Fase 1: Preparaci√≥n y Geolocalizaci√≥n</p>

        <div class="card">
            <label class="label-bold">Nombre del Inspector *</label>
            <input id="inspector" class="input-modern">

            <label class="label-bold" style="margin-top:10px;">N¬∫ Expediente *</label>
            <input id="expediente" class="input-modern">
        </div>

        <div class="card">
            <label class="label-bold">Equipos de Medida</label>
            <div class="input-grupal">
                <input id="eq-referencia" class="input-modern">
                <button type="button" onclick="a√±adirEquipoMedida()">+</button>
            </div>
            <ul id="lista-equipos"></ul>
        </div>

        <div class="card">
            <label class="label-bold">Firma del T√©cnico</label>
            <div class="signature-wrapper">
                <canvas id="canvas-firma"></canvas>
            </div>
            <button type="button" class="btn-clear" onclick="limpiarFirma()">‚úñ Borrar Firma</button>
        </div>

        <button class="btn-gps-action" onclick="iniciarInspeccion()">üöÄ CAPTURAR GPS E INICIAR</button>

        <div id="datos-inicio" style="display:none;">
            <p>üìç GPS: <span id="gps-display"></span></p>
            <!-- üîß ANTES iba a hoja2 (DOCUMENTACI√ìN) -->
            <!-- ‚úÖ AHORA va directo a DATOS DEL TRAFO -->
            <button class="btn-continue" onclick="cambiarHoja(2)">CONTINUAR ‚Üí</button>
        </div>
    </div>

<!-- ================= HOJA 2 ‚Äì DATOS TITULAR E INSTALACI√ìN ================= -->
<div id="hoja2" class="page" style="display:none;">
    <h1>Datos del Titular e Instalaci√≥n</h1>

    <!-- ===== TITULAR ===== -->
    <div class="card">
        <p class="section-tag">Titular</p>

        <label class="mini-label">Nombre / Raz√≥n social</label>
        <input id="titular_nombre" class="input-modern">

        <div class="grid-tecnico">
            <div>
                <label class="mini-label">CIF</label>
                <input id="titular_cif" class="input-modern">
            </div>
            <div>
                <label class="mini-label">Tel√©fono</label>
                <input id="titular_telefono" class="input-modern">
            </div>
        </div>

        <label class="mini-label">Direcci√≥n</label>
        <input id="titular_direccion" class="input-modern">

        <div class="grid-tecnico">
            <div>
                <label class="mini-label">CP / Localidad</label>
                <input id="titular_cp" class="input-modern">
            </div>
            <div>
                <label class="mini-label">Provincia</label>
                <input id="titular_provincia" class="input-modern">
            </div>
        </div>
    </div>

    <!-- ===== INSTALACI√ìN ===== -->
    <div class="card">
        <p class="section-tag">Instalaci√≥n</p>

        <label class="mini-label">Denominaci√≥n de la instalaci√≥n</label>
        <input id="inst_denominacion" class="input-modern">

        <label class="mini-label">Ubicaci√≥n (coordenadas)</label>
        <input id="inst_coordenadas" class="input-modern">

        <label class="mini-label">Direcci√≥n</label>
        <input id="inst_direccion" class="input-modern">

        <div class="grid-tecnico">
            <div>
                <label class="mini-label">CP / Localidad</label>
                <input id="inst_cp" class="input-modern">
            </div>
            <div>
                <label class="mini-label">Provincia</label>
                <input id="inst_provincia" class="input-modern">
            </div>
        </div>

        <div class="grid-tecnico">
            <div>
                <label class="mini-label">N¬∫ Registro</label>
                <input id="inst_registro" class="input-modern">
            </div>
            <div>
                <label class="mini-label">Fecha √∫ltima inspecci√≥n</label>
                <input id="inst_ultima" class="input-modern">
            </div>
            <div>
                <label class="mini-label">Reglamento</label><br>
                <label><input type="radio" name="inst_reglamento" value="1982"> 1982</label>
                <label><input type="radio" name="inst_reglamento" value="2014"> 2014</label>
            </div>
        </div>
    </div>

    <!-- ===== TIPO DE INSPECCI√ìN ===== -->
    <div class="card">
        <p class="section-tag">Tipo de inspecci√≥n</p>

        <div class="grid-tecnico">
            <label>
                <input type="radio" name="insp_tipo_principal" value="Inicial"
                       onchange="toggleInicial(true)">
                Inicial
            </label>
            <label>
                <input type="radio" name="insp_tipo_principal" value="Periodica"
                       onchange="toggleInicial(false)">
                Peri√≥dica
            </label>
        </div>

        <!-- SOLO SI ES INICIAL -->
        <div id="bloque_inicial"
             style="display:none; margin-top:12px; padding-left:10px; border-left:3px solid #3b82f6;">

            <label><input type="checkbox" id="insp_nueva"> Nueva</label>

            <div class="grid-tecnico" style="margin-top:6px;">
                <label>
                    <input type="checkbox" id="insp_ampliacion"
                           onchange="document.getElementById('kw_ampliacion').style.display=this.checked?'block':'none'">
                    Ampliaci√≥n
                </label>
                <input id="kw_ampliacion" class="input-mini" placeholder="kW ampliados"
                       style="display:none;">
            </div>

            <div class="grid-tecnico" style="margin-top:6px;">
                <label>
                    <input type="checkbox" id="insp_modificacion"
                           onchange="document.getElementById('kw_modificacion').style.display=this.checked?'block':'none'">
                    Modificaci√≥n
                </label>
                <input id="kw_modificacion" class="input-mini" placeholder="kW modificados"
                       style="display:none;">
            </div>
        </div>
    </div>

    <!-- ===== PROYECTISTA ===== -->
    <div class="card">
        <p class="section-tag">Proyectista (solo inspecciones iniciales)</p>

        <div class="grid-tecnico">
            <input class="input-modern" placeholder="Nombre">
            <input class="input-modern" placeholder="Apellidos">
        </div>

        <div class="grid-tecnico">
            <input class="input-modern" placeholder="Colegio">
            <input class="input-modern" placeholder="N¬∫ colegiado">
        </div>
    </div>

    <!-- ===== DIRECTOR DE OBRA ===== -->
    <div class="card">
        <p class="section-tag">Director de obra (solo inspecciones iniciales)</p>

        <div class="grid-tecnico">
            <input class="input-modern" placeholder="Nombre">
            <input class="input-modern" placeholder="Apellidos">
        </div>

        <div class="grid-tecnico">
            <input class="input-modern" placeholder="Colegio">
            <input class="input-modern" placeholder="N¬∫ colegiado">
        </div>
    </div>

    <!-- ===== INSTALADOR / MANTENEDOR ===== -->
    <div class="card">
        <p class="section-tag">Instalador / Mantenedor</p>

        <div class="grid-tecnico">
            <input class="input-modern" placeholder="Empresa">
            <input class="input-modern" placeholder="CIF / NIF">
        </div>

        <input class="input-modern" placeholder="Nombre responsable">
    </div>

    <!-- ===== DATOS T√âCNICOS ===== -->
    <div class="card">
        <p class="section-tag">Datos t√©cnicos de la instalaci√≥n</p>

        <div class="fila-dato">
            <span class="etiqueta">Tipo de instalaci√≥n</span>
            <label><input type="radio" name="tipo_inst" value="Interior"> Interior</label>
            <label><input type="radio" name="tipo_inst" value="Exterior"> Exterior</label>
        </div>

        <div class="fila-dato">
            <span class="etiqueta">L√≠nea de alimentaci√≥n</span>
            <label><input type="radio" name="linea_alim" value="Aerea"> A√©rea</label>
            <label><input type="radio" name="linea_alim" value="Subterranea"> Subterr√°nea</label>
            <label><input type="radio" name="linea_alim" value="Mixta"> Mixta</label>
        </div>

        <div class="fila-dato">
            <span class="etiqueta">Protecci√≥n sobretensiones</span>
            <label><input type="radio" name="sobretensiones" value="Si"> S√≠</label>
            <label><input type="radio" name="sobretensiones" value="No"> No</label>
        </div>

        <label class="mini-label">Tensiones de servicio 1¬∫ / 2¬∫ (V)</label>
        <input class="input-modern">

        <label class="mini-label">Potencia instalada total (kVA)</label>
        <input class="input-modern">

        <label class="mini-label">Protecciones de l√≠nea (I-defecto / tiempo desconexi√≥n)</label>
        <input class="input-modern">

        <label class="mini-label">Empresa de distribuci√≥n</label>
        <input class="input-modern">
    </div>

    <!-- ===== NAVEGACI√ìN ===== -->
    <div class="footer-nav">
        <button class="btn-back" onclick="cambiarHoja(1)">‚Üê Volver</button>
        <button class="btn-continue" onclick="cambiarHoja(3)">DATOS TRAFO ‚Üí</button>
    </div>

</div>

    <!-- ================= HOJA 3 ================= -->
    <div id="hoja3" class="page" style="display:none;">
        <h1>2. CARACTER√çSTICAS DEL TRAFO</h1>
        <div id="contenedor-trafos-datos"></div>

        <button class="btn-add-trafo" onclick="a√±adirFormularioTrafo()">+ A√ëADIR TRANSFORMADOR</button>

        <div class="footer-nav">
            <!-- üîß ANTES volv√≠a a hoja2 -->
            <button class="btn-back" onclick="cambiarHoja(1)">‚Üê Volver</button>
            <button class="btn-continue" onclick="cambiarHoja(4)">CHECKLIST ‚Üí</button>
        </div>
    </div>

    <!-- ================= HOJA 4 ================= -->
    <div id="hoja4" class="page" style="display:none;">
        <h1 id="titulo-seccion"></h1>
        <div id="contenedor-preguntas"></div>

        <div class="footer-nav">
            <button class="btn-back" onclick="irAtras()">‚Üê Volver</button>
            <button class="btn-continue" id="btn-siguiente-seccion" onclick="irAdelante()">SIGUIENTE ‚Üí</button>
        </div>
    </div>

</div>

<script src="app.js" defer></script>
</body>
</html>

