<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>FITI ‚Äì Inspecci√≥n AT</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

<div class="container">

    <div id="hoja1" class="page">
        <h1 class="main-title">Registro de Inspecci√≥n</h1>

        <div class="card">
            <label class="label-bold">Nombre del Inspector *</label>
            <input id="inspector" class="input-modern" placeholder="Nombre completo">

            <label class="label-bold" style="margin-top:10px;">N¬∫ Expediente *</label>
            <input id="expediente" class="input-modern" placeholder="Ej: 2024/001">
        </div>

        <div class="card">
            <label class="label-bold">Equipos de Medida</label>
            <div class="input-grupal">
                <input id="eq-referencia" class="input-modern" placeholder="Referencia equipo">
                <button type="button" onclick="a√±adirEquipoMedida()">+</button>
            </div>
            <ul id="lista-equipos"></ul>
        </div>

        <div class="card">
            <label class="label-bold">Firma del T√©cnico</label>
            <div class="signature-wrapper">
                <canvas id="canvas-firma"></canvas>
            </div>
            <button type="button" class="btn-clear" onclick="limpiarFirma()">‚úñ Borrar Firma</button>
        </div>

        <button class="btn-gps-action" onclick="iniciarInspeccion()">üöÄ CAPTURAR GPS E INICIAR</button>

        <div id="datos-inicio" style="display:none; margin-top: 15px;">
            <p>üìç GPS: <span id="gps-display"></span></p>
            <button class="btn-continue" onclick="cambiarHoja(2)">CONTINUAR ‚Üí</button>
        </div>
    </div>

    <div id="hoja2" class="page" style="display:none;">
        <h1 class="main-title">Identificaci√≥n del titular</h1>

        <div class="card">
            <label class="mini-label">Nombre / Raz√≥n social</label>
            <input id="titular_nombre" class="input-modern">

            <div class="grid-tecnico" style="margin-top:8px;">
                <div>
                    <label class="mini-label">CIF</label>
                    <input id="titular_cif" class="input-modern">
                </div>
                <div>
                    <label class="mini-label">Tel√©fono</label>
                    <input id="titular_telefono" class="input-modern">
                </div>
            </div>

            <label class="mini-label" style="margin-top:8px;">Direcci√≥n</label>
            <input id="titular_direccion" class="input-modern">

            <div class="grid-tecnico" style="margin-top:8px;">
                <div>
                    <label class="mini-label">CP / Localidad</label>
                    <input id="titular_cp_localidad" class="input-modern">
                </div>
                <div>
                    <label class="mini-label">Provincia</label>
                    <input id="titular_provincia" class="input-modern">
                </div>
            </div>
        </div>

        <div class="footer-nav">
            <button class="btn-back" onclick="cambiarHoja(1)">‚Üê Volver</button>
            <button class="btn-continue" onclick="cambiarHoja(3)">SIGUIENTE ‚Üí</button>
        </div>
    </div>

    <div id="hoja3" class="page" style="display:none;">
        <h1 class="main-title">Datos de la instalaci√≥n</h1>

        <div class="card">
            <label class="mini-label">Denominaci√≥n</label>
            <input id="inst_denominacion" class="input-modern">

            <label class="mini-label" style="margin-top:8px;">Ubicaci√≥n (coordenadas)</label>
            <input id="inst_coordenadas" class="input-modern">

            <label class="mini-label" style="margin-top:8px;">Direcci√≥n</label>
            <input id="inst_direccion" class="input-modern">
        </div>

        <div class="footer-nav">
            <button class="btn-back" onclick="cambiarHoja(2)">‚Üê Volver</button>
            <button class="btn-continue" onclick="procesarHoja3()">SIGUIENTE ‚Üí</button>
        </div>
    </div>

    <div id="hoja4" class="page" style="display:none;">
        <h1>1. DOCUMENTACI√ìN</h1>
        <div id="contenedor-doc"></div>

        <div class="footer-nav">
            <button class="btn-back" onclick="cambiarHoja(3)">‚Üê Volver</button>
            <button class="btn-continue" onclick="cambiarHoja(5)">DATOS TRAFO ‚Üí</button>
        </div>
    </div>

    <div id="hoja5" class="page" style="display:none;">
        <h1>2. CARACTER√çSTICAS DEL TRAFO</h1>
        <div id="contenedor-trafos-datos"></div>

        <button class="btn-add-trafo" onclick="a√±adirFormularioTrafo()">+ A√ëADIR TRANSFORMADOR</button>

        <div class="footer-nav">
            <button class="btn-back" onclick="cambiarHoja(4)">‚Üê Volver</button>
            <button class="btn-continue" onclick="cambiarHoja(6)">CHECKLIST ‚Üí</button>
        </div>
    </div>

    <div id="hoja6" class="page" style="display:none;">
        <h1 id="titulo-seccion"></h1>
        <div id="contenedor-preguntas"></div>

        <div class="footer-nav">
            <button class="btn-back" onclick="irAtras()">‚Üê Volver</button>
            <button class="btn-continue" onclick="irAdelante()">SIGUIENTE ‚Üí</button>
        </div>
    </div>

    <div id="hojaCertificado" class="page" style="display:none;">
        <h1 class="main-title">Certificado de Inspecci√≥n AT</h1>
        <p class="step-subtitle">Vista previa antes de la emisi√≥n</p>

        <div class="card">
            <strong>N¬∫ Expediente:</strong> <span id="cert_expediente"></span><br>
            <strong>Fecha:</strong> <span id="cert_fecha"></span>
        </div>

        <div class="card">
            <h3 class="section-tag">Titular</h3>
            <p><strong>Nombre:</strong> <span id="cert_titular_nombre"></span></p>
        </div>

        <div class="card">
            <h3 class="section-tag">Resultado de la inspecci√≥n</h3>
            <label><input type="radio" name="resultado_cert" value="Favorable"> Favorable</label><br>
            <label><input type="radio" name="resultado_cert" value="Condicionada"> Condicionada</label><br>
            <label><input type="radio" name="resultado_cert" value="Negativa"> Negativa</label>
        </div>

        <div class="footer-nav">
            <button class="btn-back" onclick="cambiarHoja(6)">‚Üê Volver al checklist</button>
            <button class="btn-continue" onclick="generarPDF()">GENERAR CERTIFICADO PDF</button>
        </div>
    </div>

</div>

<script src="https://unpkg.com/pdf-lib/dist/pdf-lib.min.js"></script>
<script src="app.js"></script>
</body>
</html>